import pandas as pd

file = "taxonomic_abundances.csv"

# Load the dataset and rename the first unnamed column
df = pd.read_csv(file, header=0)
df.rename(columns={'Unnamed: 0': 'Bacteria'}, inplace=True)

# List of genera to include (only keep these)
genera_to_include = ['Bifidobacterium', 'Eubacterium', 'Streptococcus',
                    'Fusobacterium', 'Escherichia', 'Shigella', 'Akkermansia',
                    'Lachnospira', 'Faecalibacterium', 'Lachnospiraceae',
                    'Prevotella', 'Roseburia']

# Function to check if the species is among the genera to include
def is_in_genera_to_include(bacteria_name):
    for genus in genera_to_include:
        # Check if the genus name is a substring of the bacteria name
        if genus.lower() in bacteria_name.lower():
            return True
    return False

# Apply the function to keep only rows with the specified genera
included_df = df[df['Bacteria'].apply(is_in_genera_to_include)]

# Print the number of rows before and after to see the change
print(f"Original dataframe rows: {len(df)}")
print(f"Included dataframe rows: {len(included_df)}")

# Optionally, save the included dataframe to a new CSV
included_df.to_csv('included_taxonomic_abundances.csv', index=False)

print(included_df.head())
